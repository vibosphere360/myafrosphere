function trackEvent(category,action,label,value){console.log(`📊 Analytics: ${category} - ${action} - ${label}${value?` - ${value}`:''}`)}function trackPerformance(){if(performance){window.addEventListener('load',()=>{const perfData=performance.getEntriesByType('navigation')[0];trackEvent('Performance','Page Load','Homepage',Math.round(perfData.loadEventEnd-perfData.fetchStart))})}}function openModal(modalId){const modal=document.getElementById(modalId);if(modal){modal.style.display='flex';document.body.style.overflow='hidden';const focusableElements=modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');const firstElement=focusableElements[0];const lastElement=focusableElements[focusableElements.length-1];firstElement.focus();modal.addEventListener('keydown',e=>{if(e.key==='Tab'){if(e.shiftKey&&document.activeElement===firstElement){e.preventDefault();lastElement.focus()}else if(!e.shiftKey&&document.activeElement===lastElement){e.preventDefault();firstElement.focus()}}});trackEvent('Modal','Open',modalId)}}function closeModal(modalId){const modal=document.getElementById(modalId);if(modal){modal.style.display='none';document.body.style.overflow='auto';trackEvent('Modal','Close',modalId)}}document.addEventListener('click',e=>{if(e.target.classList.contains('modal')){e.target.style.display='none';document.body.style.overflow='auto';trackEvent('Modal','Close','Click Outside')}});document.addEventListener('keydown',e=>{if(e.key==='Escape'){document.querySelectorAll('.modal').forEach(modal=>{if(modal.style.display==='flex')closeModal(modal.id)})}});function showError(inputId,errorId,message){const input=document.getElementById(inputId);const error=document.getElementById(errorId);input.setAttribute('aria-invalid','true');error.textContent=message;error.style.display='block';return false}function clearErrors(formId){const form=document.getElementById(formId);form.querySelectorAll('.error-message').forEach(error=>error.style.display='none');form.querySelectorAll('.form-input').forEach(input=>input.setAttribute('aria-invalid','false'))}function validateEmail(email){return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)}function signIn(){clearErrors('signinForm');const email=document.getElementById('signinEmail').value;const password=document.getElementById('signinPassword').value;let isValid=true;if(!email){isValid=showError('signinEmail','signinEmailError','Please enter a valid email.')}else if(!validateEmail(email)){isValid=showError('signinEmail','signinEmailError','Invalid email format.')}if(!password){isValid=showError('signinPassword','signinPasswordError','Please enter your password.')};if(isValid){alert('✅ Signed in! (Demo mode)');trackEvent('Auth','Success','Sign In');closeModal('signinModal')}}function signUp(){clearErrors('signupForm');const firstName=document.getElementById('firstName').value;const lastName=document.getElementById('lastName').value;const email=document.getElementById('signupEmail').value;const password=document.getElementById('signupPassword').value;let isValid=true;if(!firstName){isValid=showError('firstName','firstNameError','Please enter your first name.')}if(!lastName){isValid=showError('lastName','lastNameError','Please enter your last name.')}if(!email){isValid=showError('signupEmail','signupEmailError','Please enter a valid email.')}else if(!validateEmail(email)){isValid=showError('signupEmail','signupEmailError','Invalid email format.')}if(!password){isValid=showError('signupPassword','signupPasswordError','Please enter a password.')}else if(password.length<8){isValid=showError('signupPassword','signupPasswordError','Password must be at least 8 characters.')};if(isValid){alert(`✅ Account created, ${firstName}! (Demo mode)`);trackEvent('Auth','Success','Sign Up');closeModal('signupModal')}}function signInWithGoogle(){alert('Google sign-in would redirect to Google for authentication. This is a demo.');trackEvent('Auth','Initiate','Google')}function resetPassword(){clearErrors('forgotPasswordForm');const email=document.getElementById('forgotPasswordEmail').value;if(!email){showError('forgotPasswordEmail','forgotPasswordEmailError','Please enter a valid email.');return}else if(!validateEmail(email)){showError('forgotPasswordEmail','forgotPasswordEmailError','Invalid email format.');return}alert(`✅ Password reset link sent to ${email}`);trackEvent('Auth','Password Reset',email);closeModal('forgotPasswordModal')}const africanCountries=[{name:'Nigeria',code:'NG',emoji:'🇳🇬',region:'West Africa'},{name:'Ghana',code:'GH',emoji:'🇬🇭',region:'West Africa'},{name:'Kenya',code:'KE',emoji:'🇰🇪',region:'East Africa'},{name:'South Africa',code:'ZA',emoji:'🇿🇦',region:'Southern Africa'},{name:'Egypt',code:'EG',emoji:'🇪🇬',region:'North Africa'},{name:'Morocco',code:'MA',emoji:'🇲🇦',region:'North Africa'},{name:'Ethiopia',code:'ET',emoji:'🇪🇹',region:'East Africa'},{name:'Tanzania',code:'TZ',emoji:'🇹🇿',region:'East Africa'},{name:'Uganda',code:'UG',emoji:'🇺🇬',region:'East Africa'},{name:"Côte d'Ivoire",code:'CI',emoji:'🇨🇮',region:'West Africa'},{name:'Senegal',code:'SN',emoji:'🇸🇳',region:'West Africa'},{name:'Algeria',code:'DZ',emoji:'🇩🇿',region:'North Africa'},{name:'Zambia',code:'ZM',emoji:'🇿🇲',region:'Southern Africa'},{name:'Zimbabwe',code:'ZW',emoji:'🇿🇼',region:'Southern Africa'},{name:'Cameroon',code:'CM',emoji:'🇨🇲',region:'Central Africa'},{name:'Tunisia',code:'TN',emoji:'🇹🇳',region:'North Africa'},{name:'Angola',code:'AO',emoji:'🇦🇴',region:'Southern Africa'},{name:'Mozambique',code:'MZ',emoji:'🇲🇿',region:'Southern Africa'},{name:'Niger',code:'NE',emoji:'🇳🇪',region:'West Africa'},{name:'Malawi',code:'MW',emoji:'🇲🇼',region:'Southern Africa'},{name:'Burkina Faso',code:'BF',emoji:'🇧🇫',region:'West Africa'},{name:'Mali',code:'ML',emoji:'🇲🇱',region:'West Africa'},{name:'Chad',code:'TD',emoji:'🇹🇩',region:'Central Africa'},{name:'Somalia',code:'SO',emoji:'🇸🇴',region:'East Africa'},{name:'Guinea',code:'GN',emoji:'🇬🇳',region:'West Africa'},{name:'Benin',code:'BJ',emoji:'🇧🇯',region:'West Africa'},{name:'Rwanda',code:'RW',emoji:'🇷🇼',region:'East Africa'},{name:'Burundi',code:'BI',emoji:'🇧🇮',region:'East Africa'},{name:'Togo',code:'TG',emoji:'🇹🇬',region:'West Africa'},{name:'Sudan',code:'SD',emoji:'🇸🇩',region:'North Africa'},{name:'Libya',code:'LY',emoji:'🇱🇾',region:'North Africa'},{name:'Congo',code:'CG',emoji:'🇨🇬',region:'Central Africa'},{name:'Central African Republic',code:'CF',emoji:'🇨🇫',region:'Central Africa'},{name:'Sierra Leone',code:'SL',emoji:'🇸🇱',region:'West Africa'},{name:'Liberia',code:'LR',emoji:'🇱🇷',region:'West Africa'},{name:'Mauritania',code:'MR',emoji:'🇲🇷',region:'West Africa'},{name:'Eritrea',code:'ER',emoji:'🇪🇷',region:'East Africa'},{name:'Namibia',code:'NA',emoji:'🇳🇦',region:'Southern Africa'},{name:'Botswana',code:'BW',emoji:'🇧🇼',region:'Southern Africa'},{name:'Gabon',code:'GA',emoji:'🇬🇦',region:'Central Africa'},{name:'Guinea-Bissau',code:'GW',emoji:'🇬🇼',region:'West Africa'},{name:'Lesotho',code:'LS',emoji:'🇱🇸',region:'Southern Africa'},{name:'Equatorial Guinea',code:'GQ',emoji:'🇬🇶',region:'Central Africa'},{name:'Mauritius',code:'MU',emoji:'🇲🇺',region:'Southern Africa'},{name:'Eswatini',code:'SZ',emoji:'🇸🇿',region:'Southern Africa'},{name:'Djibouti',code:'DJ',emoji:'🇩🇯',region:'East Africa'},{name:'Comoros',code:'KM',emoji:'🇰🇲',region:'East Africa'},{name:'Cape Verde',code:'CV',emoji:'🇨🇻',region:'West Africa'},{name:'São Tomé and Príncipe',code:'ST',emoji:'🇸🇹',region:'Central Africa'},{name:'Seychelles',code:'SC',emoji:'🇸🇨',region:'East Africa'}];function createCarouselItem(country){return `<div class="carousel-item" role="listitem" tabindex="0" aria-label="${country.name} flag - ${country.region}" onclick="joinCommunity('${country.name}','${country.code}','${country.emoji}','${country.region}')" onkeydown="if(event.key==='Enter' || event.key===' ') joinCommunity('${country.name}','${country.code}','${country.emoji}','${country.region}')"><div class="country-flag">${country.emoji}</div><div class="country-name">${country.name}</div></div>`}function initializeCarousel(){const track=document.getElementById('carouselTrack');const searchInput=document.getElementById('countrySearch');let animationFrameId;let scrollAmount=0;const itemWidth=120;const scrollSpeed=0.5;let isPaused=false;function updateCarousel(countries){track.innerHTML=countries.map(createCarouselItem).join('')}function startCarousel(){if(!isPaused){scrollAmount-=scrollSpeed;if(Math.abs(scrollAmount)>=itemWidth*africanCountries.length){scrollAmount=0}track.style.transform=`translateX(${scrollAmount}px)`;animationFrameId=requestAnimationFrame(startCarousel)}}updateCarousel(africanCountries);startCarousel();track.addEventListener('mouseenter',()=>{isPaused=true;cancelAnimationFrame(animationFrameId)});track.addEventListener('mouseleave',()=>{isPaused=false;startCarousel()});track.addEventListener('touchstart',()=>{isPaused=true;cancelAnimationFrame(animationFrameId)});track.addEventListener('touchend',()=>{isPaused=false;startCarousel()});document.querySelector('.carousel-control.prev').addEventListener('click',()=>{scrollAmount+=itemWidth*5;if(scrollAmount>0)scrollAmount=-itemWidth*(africanCountries.length-5);track.style.transition='transform 0.5s ease';track.style.transform=`translateX(${scrollAmount}px)`;trackEvent('Carousel','Navigate','Previous')});document.querySelector('.carousel-control.next').addEventListener('click',()=>{scrollAmount-=itemWidth*5;if(Math.abs(scrollAmount)>itemWidth*africanCountries.length){scrollAmount=0}track.style.transition='transform 0.5s ease';track.style.transform=`translateX(${scrollAmount}px)`;trackEvent('Carousel','Navigate','Next')});document.querySelector('.carousel-control.pause').addEventListener('click',()=>{isPaused=!isPaused;document.querySelector('.carousel-control.pause').textContent=isPaused?'▶':'⏸';if(!isPaused)startCarousel();else cancelAnimationFrame(animationFrameId);trackEvent('Carousel',isPaused?'Pause':'Play','Toggle')});searchInput.addEventListener('input',e=>{const search=e.target.value.toLowerCase();const filtered=africanCountries.filter(c=>c.name.toLowerCase().includes(search));isPaused=true;cancelAnimationFrame(animationFrameId);updateCarousel(filtered);scrollAmount=0;track.style.transform=`translateX(0px)`;trackEvent('Carousel','Search',search)});document.querySelectorAll('.close').forEach(closeBtn=>closeBtn.addEventListener('click',e=>{const modal=e.target.closest('.modal');if(modal)closeModal(modal.id)}))}function joinCommunity(countryName,countryCode,emoji,region){trackEvent('Community','Interest',countryName);const modal=document.createElement('div');modal.className='modal';modal.style.display='flex';modal.innerHTML=`<div class="modal-content"><button class="close" onclick="this.parentElement.parentElement.remove(); trackEvent('Community', 'Modal Close', '${countryName}');" aria-label="Close community modal">&times;</button><div class="preview-content"><h3 class="preview-header">Welcome to c/${countryName}</h3><p class="preview-text">Connect with your ${countryName} family worldwide. Share stories, opportunities, and celebrate your heritage.</p><div class="preview-post"><div class="preview-post-header">${emoji} ${countryName} Community</div><div class="preview-post-content">Just joined and already found 3 job leads in ${countryName}! Grateful for this space.</div><div class="preview-post-action">👍 42 • 💬 8</div></div><button onclick="openModal('signupModal'); this.parentElement.parentElement.parentElement.remove(); trackEvent('Community', 'Join Initiate', '${countryName}');" class="btn btn-primary">Join c/${countryName}</button></div></div>`;document.body.appendChild(modal);const focusableElements=modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');const firstElement=focusableElements[0];const lastElement=focusableElements[focusableElements.length-1];firstElement.focus();modal.addEventListener('keydown',e=>{if(e.key==='Tab'){if(e.shiftKey&&document.activeElement===firstElement){e.preventDefault();lastElement.focus()}else if(!e.shiftKey&&document.activeElement===lastElement){e.preventDefault();firstElement.focus()}}})}document.addEventListener('DOMContentLoaded',()=>{initializeCarousel();trackPerformance();document.querySelector('.login-btn').addEventListener('click',()=>openModal('signinModal'));document.querySelector('.cta-nav').addEventListener('click',()=>openModal('signupModal'));document.querySelector('.btn-primary').addEventListener('click',()=>openModal('signupModal'));document.querySelector('.btn-secondary').addEventListener('click',()=>openModal('signinModal'));document.querySelector('.forgot-password a').addEventListener('click',e=>{e.preventDefault();openModal('forgotPasswordModal');closeModal('signinModal')});document.querySelector('.modal-switch a:nth-child(2)').addEventListener('click',e=>{e.preventDefault();closeModal('signinModal');openModal('signupModal')});document.querySelector('.modal-switch a:nth-child(3)').addEventListener('click',e=>{e.preventDefault();closeModal('signupModal');openModal('signinModal')});document.querySelector('.modal-switch a:nth-child(4)').addEventListener('click',e=>{e.preventDefault();closeModal('forgotPasswordModal');openModal('signinModal')});document.querySelector('#signinForm button').addEventListener('click',signIn);document.querySelector('#signupForm button').addEventListener('click',signUp);document.querySelector('.social-button').addEventListener('click',signInWithGoogle);document.querySelector('#forgotPasswordForm button').addEventListener('click',resetPassword)});